#!/bin/bash
set -euo pipefail

# $name is of type $type, weighs ${formatted_weight}kg, and is ${formatted_height}m tall.

data=$(jq -r '
  .name as $name
  | (.types[0].type.name) as $type
  | .weight as $weight
  | .height as $height
  | "\($name)|\($type)|\($weight)|\($height)"
' data.json)

echo "$data" | awk -F'|' '{
  name = toupper(substr($1,1,1)) substr($1,2)
  type = toupper(substr($2,1,1)) substr($2,2)
  printf "%s is of type %s, weighs %skg, and is %sm tall.\n", name, type, $3/10, $4/10
}' | sed 's/\.0\([km]\)/\1/g'
